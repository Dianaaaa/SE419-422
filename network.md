## technologies

####  802.11ac

802.11 是一种无线局域网标准。
802.11 a/b/g/n/ac 都是由802.11 发展而来的。不同的后缀代表着不同的物理层标准工作频段和不同的传输速率，也就是说它们的物理层和传输速度不同。

802.11ac是802.11家族的一项无线网上标准，由IEEE标准协会制定，透过5GHz频带提供高通量的无线局域网（WLAN），俗称5G WiFi（5th Generation of Wi-Fi）。理论上它能够提供最少1Gbps带宽进行多站式无线局域网通信，或是最少500Mbps的单一连线传输带宽。

###### Pros & Cons

它的优点：802.11ac标准提供了一种更接近于传统的蜂窝式无线网络的Wi-Fi体验。802.11ac不仅提高了吞吐量，还能比以前的Wi-Fi版本更好的管理通道绑定引起的互操作性问题。而且，802.11ac利用更好的编码算法，天线配置也更加密集，所以更省电，还提高了Wi-Fi接入点（AP）的覆盖范围。所以，802.11ac每个无线接入点可以支持更多用户。而且802.11ac的无线接入点是向后兼容802.11n的，所以升级AP会变得非常简单。

它的缺点：虽然801.11ac无线协议（千兆[Wi-Fi]）承诺能够提供1.3Gbps吞吐量，并且支持并发高清流媒体，但是这个协议只能运行在5GHz频道上。这个宽大的频道给802.11ac提供了足够在设备与接入端之间实现更高传输速度的空间，但是5GHz频道的覆盖范围小于通常使用的2.4GHz频道。



#### 三层交换技术

第三层交换工作在OSI七层网络模型中的第三层即网络层，是利用第三层协议中的IP包的报头信息来对后续数据业务流进行标记，具有同一标记的业务流的后续报文被交换到第二层数据链路层，从而打通源IP地址和目的IP地址之间的一条通路。这条通路经过第二层链路层。有了这条通路，三层交换机就没有必要每次将接收到的数据包进行拆包来判断路由，而是直接将数据包进行转发，将数据流进行交换。 

###### Features

- 由硬件结合实现数据的高速转发。 
- 这就不是简单的二层交换机和路由器的叠加，三层路由模块直接叠加在二层交换的高速背板总线上，突破了传统路由器的接口速率限制，速率可达几十Gbit/s。算上背板带宽，这些是三层交换机性能的两个重要参数。 
- 简洁的路由软件使路由过程简化。 
- 大部分的数据转发，除了必要的路由选择交由路由软件处理，都是又二层模块高速转发，路由软件大多都是经过处理的高效优化软件，并不是简单照搬路由器中的软件。 

## 负载均衡

在高速发展的移动互联网时代，负载均衡有着举足轻重的地位，它是应用流量的入口，对应用的可靠性和性能起着决定性的作用，因此负载均衡需要满足高性能、高可靠两个特点。

#### DNS负载均衡 

早期的方法是使用DNS做负载，通过给客户端解析不同的IP地址，让客户端的流量直接到达各个服务器。但是这种方法有一个很大的缺点就是延时性问题，在做出调度策略改变以后，由于DNS各级节点的缓存并不会及时的在客户端生效，而且DNS负载的调度策略比较简单，无法满足业务需求，因此就出现了负载均衡。

客户端的流量首先会到达负载均衡服务器，由负载均衡服务器通过一定的调度算法将流量分发到不同的应用服务器上面，同时负载均衡服务器也会对应用服务器做周期性的健康检查，当发现故障节点时便动态的将节点从应用服务器集群中剔除，以此来保证应用的高可用。

#### 四层负载均衡

四层负载均衡工作在OSI模型的传输层，主要工作是转发，它在接收到客户端的流量以后通过修改数据包的地址信息将流量转发到应用服务器。

#### 七层负载均衡

七层负载均衡工作在OSI模型的应用层，因为它需要解析应用层流量，所以七层负载均衡在接到客户端的流量以后，还需要一个完整的TCP/IP协议栈。七层负载均衡会与客户端建立一条完整的连接并将应用层的请求流量解析出来，再按照调度算法选择一个应用服务器，并与应用服务器建立另外一条连接将请求发送过去，因此七层负载均衡的主要工作就是代理。

###### Pros & Cons

七层应用负载的好处，是使得整个网络更智能化。

七层负载均衡明显的对负载均衡设备的要求更高，处理七层的能力也必然会低于四层模式的部署方式。

## Key indicators

网络带宽有两种含义，第一个定义（ 网络带宽消耗）是衡量两个网络节点之间通信性能的重要的指标之一。

######  网络带宽消耗

带宽指单位时间能通过链路的数据量。通常以bps来表示，即每秒可传输之位数。

######  网络托管带宽

在网站托管服务中，带宽有时被用来描述在特定时间段从或向网站/服务器传输的数据量。例如，单月内的累积消耗“带宽”，实际为传输的数据总量。每月或特定周期内的最大传输数据量实际是指最大传输总额。

###### 如何测量网络带宽消耗

网络带宽测试工具,如iperf。

iPerf 是专业的网络测试工具，它基于 TCP/IP 和 UDP/IP 协议，用以测量两个网络节点之间 TCP 和 UDP 端口的网络带宽，还能提供网络延迟、丢包率等统计信息。

iPerf 在工作时，测试的两端一方作为 Server，另一方为 Client。程序启动的命令相同，通过不同的参数来区别以哪种工作方式运行。通常情况下先启动 Server 端，使 iPerf 监听在某个固定端口。然后在 Client 端执行相应的命令开始测试。

## ▪ Your own comment 

###### 负载均衡用硬件还是软件实现？

通过硬件来进行负载均衡：常见的硬件有比较昂贵的F5和Array等商用的负载均衡器，它的优点就是有专业的维护团队来对这些服务进行维护、缺点就是花销太大，所以对于规模较小的网络服务来说暂时还没有需要使用。

通过软件来进行负载均衡：使用类似于Nginx/LVS/HAProxy的基于 Linux的开源免费的负载均衡软件，这些都是通过软件级别来实现，所以费用非常低廉。 

###### 使用哪个软件来进行负载均衡？

对网络负载均衡的使用应该随着网站规模的提升根据不同的阶段来使用不同的技术。

规模较小时：利用Nginx或HAProxy进行单点的负载均衡。缺点是这种负载均衡本身会发生单点故障，所以需要额外的容错机制，比如DNS负载均衡或者keepalived + nginx。

随着网络服务进一步扩大，这时单点的Nginx已经不能满足，这时适合使用LVS或者商用Array，Nginx此时就作为LVS或者Array的节点来使用。这种技术的优点是抗负载能力强，LVS有着接近硬件设备的网络吞吐和连接负载能力，缺点是维护过程复杂，而且比较重型。